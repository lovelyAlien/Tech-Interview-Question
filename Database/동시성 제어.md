## 무엇

동시에 실행되는 여러 개의 트랜잭션이 작업을 성공적으로 마칠 수 있도록 트랜잭션의 실행 순서를 제어하는 기법이다.

## 왜씀

- 다중 사용자 환경을 지원하는 데이터 베이스 시스템에서 여러 트랜잭션들이 성공적으로 동시에 실행될 수 있도록 지원하는 기능
- 다중 사용자 환경을 지원하는 DB system의 경우 필수적으로 지원해야 하는 기능으로 병행제어라고도 한다.
- 트랜잭션의 직렬화 수행 보장
![트랜잭션 직렬화](https://user-images.githubusercontent.com/42866800/163695862-c1d61155-d977-4dc8-8d6c-819887f463f2.png)

### 동시성 제얼르 하지 않았을때 발생하는 문제
![동시성 제어를 하지 않을 시](https://user-images.githubusercontent.com/42866800/163695775-76de4c5b-f098-4e22-9e7c-5a11cdb7081a.png)
- 갱신 손실
- 두개 이상의 트랜잭션이 동시에 똑같은 한개의 데이터를 수정시에 발생하는 문제
- 한 트랜잭션이 갱신한 내용을 다른 트랜잭션이 덮어씀으로써 갱신이 무효화 되는일이 발생

- 현황 파악 오류
- 한 트랜잭션이 수정을 하고 그 수정사항을 커밋하지 않았을때 다른 트랜잭션이 같은 데이터를 접근할때 발생하는 문제
    1. Non Repeatable read
    2. 한 트랜잭션에 같은 데이터를 두번이상 읽는데 그 한 트랜잭션에서 같은 데이터가 다른 값을 읽을 때 발생하는 문제이다.
    
    
    
    1. Phantom Read
    2. 한 트랜잭션이 같은 데이터를 한번 읽고 이후 같은 데이터를 읽었을때 그 데이터가 존재하지 않는것
        
       <img width="254" alt="phantomRead" src="https://user-images.githubusercontent.com/42866800/163695783-091737ae-8e85-413b-9066-f01f1cbbfe3c.png">
        
    
    1. Incorrect Summary
    2. 한 트랜잭션이 일부 레코드에 집계 함수를 적용하는 동안 다른 트랜잭션이 같은 데이터베이스를 업데이트하는 상황을 생각해 보자. 업데이트하는 트랜잭션의 몇개의 데이터는 변경을 했고 아직 다른 몇개의 데이터는 변경하지 못한상황에서 집계 함수는 값이 업데이트되기 전에 값을 계산하고 업데이트된 후에 값을 계산할 수 있습니다.
    
    ![https://github.com/NKLCWDT/cs/raw/main/images/incorrectSummary.png](https://github.com/NKLCWDT/cs/raw/main/images/incorrectSummary.png)
    

### 동시성 제어 방법
![동시성 제어 방법](https://user-images.githubusercontent.com/42866800/163695772-b4ee8789-e989-4fe8-b5e8-ac59547941e9.png)

상호 배제는 특정 트랜잭션이 데이터 항목에 대하여 잠금 (Lock) 을 설정하면, 잠금을 설정한 트랜잭션이 해제 (Unlock) 할 때까지 데이터를 독점적으로 사용할 수 있는 기법
